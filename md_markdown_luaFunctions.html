<!-- Copyright 2020 Rohit Goswami <rog32@hi.is>
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License. -->
<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>d-SEAMS: Lua Function Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
  loader: { load: ["[tex]/unicode", "[tex]/ams"] },
  tex: {
    packages: { "[+]": ["unicode", "ams"] },
    tags: "ams",
  },
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<!-- <link href="doxygen.css" rel="stylesheet" type="text/css" /> -->
<link href="doxyYoda.min.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" >
$(document).ready(function() {
     $(".fragment").wrap("<details class='code-details'></details>");
     $(".code-details").append("<summary>Code</summary>");
 }
)
</script>
</head>
<body>
<div class="grid-contents">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<nav class="title_area">
<a class="project_logo" href="#">
<img src="dSeamsLogo.png" width="30" height="30" alt="Logo">
</a>
<span class="project_info">d-SEAMS v1.0.0</span>
</nav>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Lua Function Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the <em>functions.lua</em> file, lua functions are called, which are registered on the C++ side to inferface with the C++ functions. Here, we document the lua functions currently available to the user.</p>
<h1>Currently Registered Lua Functions</h1>
<p>The workflows for quasi-two-dimensional ice, quasi-one-dimensional ice and bulk systems are separated. The <code>Lua</code> functions for each work-flow are registered in different blocks in the <code>C++</code> code.</p>
<h2>Common Functions</h2>
<p>The following <code>Lua</code> functions interface to the same <code>C++</code> functions in every work-flow code block.</p>
<ul>
<li><b>readFrameOnlyOne</b>: interfaces with <a class="el" href="group__sinp.html#ga30633be4befe606953d55db43d389c7b">sinp::readLammpsTrjreduced</a> <br  />
The input variables are:<ul>
<li><em>trajectory</em> - The name of the lammps trajectory file to be read in, obtained from the <em>config.yml</em> file.</li>
<li><em>frame</em> - The current frame number whose information will be read in.</li>
<li><em>resCloud</em> - The outputted <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>atomType</em> - The type ID of the desired type of atoms. Defined in <em>vars.lua</em> in the examples.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>.</li>
<li><em>sliceLowerLimits</em> - Contains the lower limits of the slice. If <em>isSlice</em> false, this will be ignored.</li>
<li><em>sliceUpperLimits</em> - Contains the upper limits of the slice. If <em>isSlice</em> false, this will be ignored. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>neighborList</b>: interfaces with <a class="el" href="group__nneigh.html#gaaaaf74d25014d1c08bb73b8be0a6fe74">nneigh::neighListO</a> <br  />
The input variables are:<ul>
<li><em>cutoffRadius</em> - The name of the lammps trajectory file to be read in, obtained from the <em>config.yml</em> file.</li>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>atomType</em> - The type ID of the desired type of atoms. Defined in <em>vars.lua</em> in the examples. <br  />
 This function returns the <em>nList</em> vector of vectors for the neighbour list (by atom ID).</li>
</ul>
</li>
<li><b>getHbondNetwork</b>: interfaces with <a class="el" href="group__bond.html#ga081e4c1f726d5b0bfd9006af2fe3fdee">bond::populateHbonds</a> <br  />
The input variables are:<ul>
<li><em>trajectory</em> - The name of the lammps trajectory file to be read in, obtained from the <em>config.yml</em> file.</li>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID.</li>
<li><em>frame</em> - The current frame number whose information will be read in.</li>
<li><em>hydrogenAtomType</em> - The type ID of the hydrogen atoms. Defined in <em>vars.lua</em> in the examples. <br  />
 This function returns the <em>hbnList</em> vector of vectors for the hydrogen-bonded neighbour list (by atom ID).</li>
</ul>
</li>
<li><b>bondNetworkByIndex</b>: interfaces with <a class="el" href="group__nneigh.html#gab2468daaf43c827b54a88af914d0fee8">nneigh::neighbourListByIndex</a> <br  />
 The input variables are:<ul>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID. <br  />
 This function returns the <em>hbnList</em> vector of vectors for the row-ordered full neighbour list, by index, NOT atom ID.</li>
</ul>
</li>
<li><b>getPrimitiveRings</b>: interfaces with <a class="el" href="group__primitive.html#ga9872b1fd04c72cc53626b882bec4b99f">primitive::ringNetwork</a> <br  />
The input variables are:<ul>
<li><em>hbnList</em> - Row-ordered neighbour list by index (and NOT the atom ID).</li>
<li><em>maxDepth</em> - The maximum depth upto which rings will be searched. This means that rings larger than maxDepth in length will not be generated. <br  />
 This function returns the <em>rings</em> vector of vectors for the primitive rings; each ring contains the atom indices of the ring members.</li>
</ul>
</li>
</ul>
<h2>Quasi-Two-Dimensional Ice</h2>
<ul>
<li><b>ringAnalysis</b>: interfaces with <a class="el" href="group__ring.html#ga83d8dc9c337e72051e01b234c12cc41c">ring::polygonRingAnalysis</a> <br  />
The input variables are:<ul>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>rings</em> - Row-ordered vector of vectors for rings of a single type. Registered on the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by index.</li>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>maxDepth</em> - The maximum depth upto which rings will be searched. This means that rings larger than maxDepth in length will not be generated.</li>
<li><em>confiningSheetArea</em> - Area calculated using the two significant dimensions of the quasi-two-dimensional sheet. Defined in <em>vars.lua</em>.</li>
</ul>
</li>
<li><b>calcRDF</b>: interfaces with <a class="el" href="group__rdf2.html#ga8dd6ebd3fe62036e77ed8b0695a9cd59">rdf2::rdf2Danalysis_AA</a> <br  />
The input variables are:<ul>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>rdf</em> - Vector containing the RDF values. Must be passed to <code>Lua</code>.</li>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>rdfCutoff</em> - Cutoff for the RDF. This should not be greater than half the box length. Defined in <em>vars.lua</em>.</li>
<li><em>binwidth</em> - Width of the bin for histogramming. Defined in <em>vars.lua</em>.</li>
<li><em>targetFrame</em> - The first frame for RDF binning. Defined in <em>vars.lua</em>.</li>
<li><em>finalFrame</em> - The final frame for RDF binning. Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>hbnList</em> vector of vectors for the hydrogen-bonded neighbour list (by atom ID).</li>
</ul>
</li>
</ul>
<h2>Quasi-One-Dimensional Ice</h2>
<ul>
<li><b>prismAnalysis</b>: interfaces with <a class="el" href="group__ring.html#ga083a38f83a1a89eba434d64a33986637">ring::prismAnalysis</a> <br  />
The input variables are:<ul>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>rings</em> - Row-ordered vector of vectors for rings of a single type. Registered on the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by index.</li>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>maxDepth</em> - The maximum depth upto which rings will be searched. This means that rings larger than maxDepth in length will not be generated.</li>
<li><em>confiningSheetArea</em> - Area calculated using the two significant dimensions of the quasi-two-dimensional sheet. Defined in <em>vars.lua</em>.</li>
</ul>
</li>
</ul>
<h2>Bulk Systems</h2>
<ul>
<li><b>readFrame</b>: interfaces with <a class="el" href="group__sinp.html#ga594a5996c0ea3ba9ee53c2ab475bde7c">sinp::readLammpsTrjO</a> <br  />
The input variables are:<ul>
<li><em>trajectory</em> - The name of the lammps trajectory file to be read in, obtained from the <em>config.yml</em> file.</li>
<li><em>frame</em> - The current frame number whose information will be read in.</li>
<li><em>resCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a> for the current frame, which has been passed to the <code>Lua</code> side.</li>
<li><em>oxygenAtomType</em> - The type ID of the Oxygen atoms in the LAMMPS trajectory file. Defined in <em>vars.lua</em> in the examples.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>.</li>
<li><em>sliceLowerLimits</em> - Contains the lower limits of the slice. If <em>isSlice</em> false, this will be ignored.</li>
<li><em>sliceUpperLimits</em> - Contains the upper limits of the slice. If <em>isSlice</em> false, this will be ignored. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>chillPlus_cij</b>: interfaces with <a class="el" href="group__chill.html#ga1b99e4a99a857d595c2800b88dc02b74">chill::getCorrelPlus</a> <br  />
This function uses the CHILL+ algorithm. <br  />
 The input variables are:<ul>
<li><em>resCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID. Passed to the <code>Lua</code> side.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>chillPlus_iceType</b>: interfaces with <a class="el" href="group__chill.html#ga340b0de2ed081c9e428a865242a1bc7f">chill::getIceTypePlus</a> <br  />
 This function is for the CHILL+ algorithm. <br  />
The input variables are:<ul>
<li><em>resCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID. Passed to the <code>Lua</code> side.</li>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>chill_cij</b>: interfaces with <a class="el" href="group__chill.html#ga4ec7f9663b66377a4156b72039b58f40">chill::getCorrel</a> <br  />
This function uses the CHILL algorithm. <br  />
 The input variables are:<ul>
<li><em>resCloud</em> - The outputted <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID. Passed to the <code>Lua</code> side.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>chill_iceType</b>: interfaces with <a class="el" href="group__chill.html#gae2288a52bfd6e9c52dbf4f70b2273953">chill::getIceType</a> <br  />
 This function is for the CHILL algorithm. <br  />
The input variables are:<ul>
<li><em>resCloud</em> - The outputted <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID. Passed to the <code>Lua</code> side.</li>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>percentage_Ice</b>: interfaces with <a class="el" href="group__chill.html#ga548414bf35e3ef8e6ea0d786ce13a05b">chill::printIceType</a> <br  />
 This function is for the CHILL algorithm. <br  />
The input variables are:<ul>
<li><em>resCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>isSlice</em> - This decides whether a slice will be created (true) or not (false). Defined in <em>vars.lua</em>.</li>
<li><em>outputFileName</em> - File name of the output file, to which the per-particle ice types will be written out. Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>resCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>.</li>
</ul>
</li>
<li><b>clusterAnalysis</b>: interfaces with <a class="el" href="group__clump.html#gae3705e982771b2719016d3c6f237515f">clump::clusterAnalysis</a> <br  />
 The input variables are:<ul>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>iceCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a> for the desired largest ice cluster, which has been passed to the <code>Lua</code> side.</li>
<li><em>resCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a> for all the particles read in, for the current frame, which has been passed to the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by atom ID. Passed to the <code>Lua</code> side.</li>
<li><em>iceNeighbourList</em> - Row-ordered neighbour list by atom index, not ID, according to the iceCloud atoms. Defined in <em>vars.lua</em>.</li>
<li><em>cutoff</em> - Cutoff for the nearest neighbours. Passed to the <code>Lua</code> side.</li>
<li><em>bopAnalysis</em> - This determines which method to use for determining the ice-like nature of the particles. This can be "q6" or "chill", for using the <img class="formulaInl" alt="$Q_6$" src="form_9.png"/> parameter or CHILL algorithm, respectively. Defined in <em>vars.lua</em>. <br  />
 This function returns the <em>iceCloud</em> <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a> for the largest ice cluster.</li>
</ul>
</li>
<li><b>recenterCluster</b>: interfaces with <a class="el" href="group__clump.html#ga05192f1f3166d0a19744345f641da360">clump::recenterClusterCloud</a> <br  />
 The input variables are:<ul>
<li><em>iceCloud</em> - The <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a> for particles in the largest ice cluster, which has been passed to the <code>Lua</code> side.</li>
<li><em>iceNeighbourList</em> - Row-ordered neighbour list by atom index, not ID, according to the iceCloud atoms. Defined in <em>vars.lua</em>.</li>
</ul>
</li>
<li><b>bulkTopologicalNetworkCriterion</b>: interfaces with <a class="el" href="group__prism3.html#gac811a7fb090a75aaf3bca9e56bf92a26">ring::topoBulkAnalysis</a> <br  />
The input variables are:<ul>
<li><em>outDir</em> - The string to the output directory, in which files will be written out. Defined in <em>vars.lua</em>.</li>
<li><em>rings</em> - Row-ordered vector of vectors for rings of a single type. Registered on the <code>Lua</code> side.</li>
<li><em>nList</em> - Row-ordered neighbour list by index. Passed to the <code>Lua</code> side.</li>
<li><em>resCloud</em> - The input <a class="el" href="structmolSys_1_1PointCloud.html">molSys::PointCloud</a>, which has been passed to the <code>Lua</code> side.</li>
<li><em>printCages</em> - Flag for printing the information of each cage in the frame (true) or not printing the coordinates/connectivity of each cage (false). Defined in <em>vars.lua</em>.</li>
</ul>
</li>
</ul>
<h1>Extending d-SEAMS</h1>
<p>d-SEAMS can be extended by writing <code>C++</code> functions in pre-existing header files or by creating header files of your own.</p>
<h2>Registering Lua Functions</h2>
<p>In order to call a <code>C++</code> function from the <code>Lua</code> script, the corresponding <code>Lua</code> function must be registered. This can be done simply in the <em><a class="el" href="main_8cpp.html">main.cpp</a></em> file:</p>
<div class="fragment"><div class="line">lua.set_function(<span class="stringliteral">&quot;luaFuncName&quot;</span>, cppFuncName);</div>
</div><!-- fragment --><p> where <em>luaFuncName</em> is the name of the lua function and <em>cppFuncName</em> is the name of the corresponding C++ function. It should be noted that default arguments must be provided explicitly when the <em>luaFuncName</em> function is called on the <code>Lua</code> side, or else the program will break with an error.</p>
<h2>Passing Variables to Lua</h2>
<p>If a <code>C++</code> struct or variable is to be defined or passed to the <code>Lua</code> side, then the variable must be defined using the following syntax inside <em><a class="el" href="main_8cpp.html">main.cpp</a></em> :</p>
<div class="fragment"><div class="line">lua[<span class="stringliteral">&quot;luaStruct&quot;</span>] = &amp;cppStruct;</div>
<div class="line">lua[<span class="stringliteral">&quot;luaVecOfVectors&quot;</span>] = &amp;cppVecOfVectors;</div>
<div class="line">lua[<span class="stringliteral">&quot;luaString&quot;</span>] = myString;</div>
</div><!-- fragment --><p> <code>C++</code> structs, vectors of vectors and other objects must be passed by reference. This need not be done for strings. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- Copyright 2020 Rohit Goswami <rog32@hi.is>
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License. -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div class="footer">
<hr class="footline"/><address class="footline"><small>
    Generated by&#160;<a href="https://www.doxygen.org/index.html">Doxygen 1.9.1</a> and the <a class="outlink" href="https://github.com/HaoZeke/doxyYoda">doxyYoda theme</a>
</small></address>
</div>
</div>
</body>
</html>
